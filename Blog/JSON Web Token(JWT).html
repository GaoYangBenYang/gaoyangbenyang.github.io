<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.0" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.7" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://gaoyangbenyang.github.io/Blog/JSON%20Web%20Token(JWT).html"><meta property="og:site_name" content="Blogs & Notes"><meta property="og:title" content="JSON Web Token(JWT)"><meta property="og:description" content="1. 摘要 JSON Web Token（缩写 JWT）是目前最流行的跨域认证解决方案，本文介绍它的原理，用法和详细的数据结构。 2. JWT的定义 Json web token（JWT）是为了网络应用环境间传递声明而执行的一种基于JSON的开发标准（RFC 7519），该token被设计为紧凑且安全的，特别适用于分布式站点的单点登陆（SSO）场景。JWT的声明一般被用来在身份提供者和服务提供者间传递被认证的用户身份信息，以便于从资源服务器获取资源，也可以增加一些额外的其它业务逻辑所必须的声明信息，该token也可直接被用于认证，也可被加密。"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-12-27T10:33:14.000Z"><meta property="article:author" content="高洋"><meta property="article:published_time" content="2023-09-27T00:00:00.000Z"><meta property="article:modified_time" content="2023-12-27T10:33:14.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"JSON Web Token(JWT)","image":[""],"datePublished":"2023-09-27T00:00:00.000Z","dateModified":"2023-12-27T10:33:14.000Z","author":[{"@type":"Person","name":"高洋","url":"https://github.com/GaoYangBenYang","email":"GaoYangBenYang@outlook.com"}]}</script><title>JSON Web Token(JWT) | Blogs & Notes</title><meta name="description" content="1. 摘要 JSON Web Token（缩写 JWT）是目前最流行的跨域认证解决方案，本文介绍它的原理，用法和详细的数据结构。 2. JWT的定义 Json web token（JWT）是为了网络应用环境间传递声明而执行的一种基于JSON的开发标准（RFC 7519），该token被设计为紧凑且安全的，特别适用于分布式站点的单点登陆（SSO）场景。JWT的声明一般被用来在身份提供者和服务提供者间传递被认证的用户身份信息，以便于从资源服务器获取资源，也可以增加一些额外的其它业务逻辑所必须的声明信息，该token也可直接被用于认证，也可被加密。">
    <link rel="preload" href="/assets/style-dfUzQDnq.css" as="style"><link rel="stylesheet" href="/assets/style-dfUzQDnq.css">
    <link rel="modulepreload" href="/assets/app-aUK2JwJm.js"><link rel="modulepreload" href="/assets/JSON Web Token(JWT).html-BfEfRWJT.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-x3n3nnut.js"><link rel="modulepreload" href="/assets/JSON Web Token(JWT).html-vAdWzu02.js">
    <link rel="prefetch" href="/assets/index.html-yTOK8KKo.js" as="script"><link rel="prefetch" href="/assets/Docker配置本地开发环境.html-fwzznNof.js" as="script"><link rel="prefetch" href="/assets/Golang中http.ListenAndServe阻塞导致if-else不执行问题分析.html-GjMZ07dk.js" as="script"><link rel="prefetch" href="/assets/Golang读取配置文件处理方式.html-UsDMYNCv.js" as="script"><link rel="prefetch" href="/assets/SpringBoot整合第三方依赖.html-Rbo1NfYb.js" as="script"><link rel="prefetch" href="/assets/WSL2的使用与BUG.html-jtmMZ6si.js" as="script"><link rel="prefetch" href="/assets/gorm中表名自动加s使用复数问题处理.html-K_m2th1B.js" as="script"><link rel="prefetch" href="/assets/基于角色访问控制(Role-Based Access Control)模型.html-6Wctv5gY.js" as="script"><link rel="prefetch" href="/assets/index.html-rVhacuDP.js" as="script"><link rel="prefetch" href="/assets/index.html-U0fFu401.js" as="script"><link rel="prefetch" href="/assets/index.html-lCtJm42s.js" as="script"><link rel="prefetch" href="/assets/index.html-V4vUNe1v.js" as="script"><link rel="prefetch" href="/assets/about.html-CwWRZSVM.js" as="script"><link rel="prefetch" href="/assets/index.html-dAk6upkN.js" as="script"><link rel="prefetch" href="/assets/index.html-hyXUVeD4.js" as="script"><link rel="prefetch" href="/assets/MySQLDocs.html-72HsqhZQ.js" as="script"><link rel="prefetch" href="/assets/index.html-ZkPKLScP.js" as="script"><link rel="prefetch" href="/assets/index.html-LGVWoLCm.js" as="script"><link rel="prefetch" href="/assets/MySQL面试题.html-lWi_caEM.js" as="script"><link rel="prefetch" href="/assets/Golang面试题.html-5TbRpxDc.js" as="script"><link rel="prefetch" href="/assets/Go入门指南.html-zZK6CTgs.js" as="script"><link rel="prefetch" href="/assets/index.html-ySwzme-M.js" as="script"><link rel="prefetch" href="/assets/JavaDocs.html-qUjdxnRx.js" as="script"><link rel="prefetch" href="/assets/index.html-5G0BFLgS.js" as="script"><link rel="prefetch" href="/assets/SpringBootDocs.html-qyFKdkn6.js" as="script"><link rel="prefetch" href="/assets/SpringCloudDocs.html-irLP3vEq.js" as="script"><link rel="prefetch" href="/assets/SpringDocs.html-Hq4OvU1p.js" as="script"><link rel="prefetch" href="/assets/GithubActionDocs.html-lDqtUjft.js" as="script"><link rel="prefetch" href="/assets/index.html-iR-fLBdD.js" as="script"><link rel="prefetch" href="/assets/DockerDocs.html-IX7EPXcV.js" as="script"><link rel="prefetch" href="/assets/KubernetesDocs.html-4kkamRlb.js" as="script"><link rel="prefetch" href="/assets/index.html-AhPAYXwW.js" as="script"><link rel="prefetch" href="/assets/AlgorithmsDocs.html-iP0c58_v.js" as="script"><link rel="prefetch" href="/assets/DataStructuresDocs.html-jQfwesVL.js" as="script"><link rel="prefetch" href="/assets/index.html-9b3aqzGr.js" as="script"><link rel="prefetch" href="/assets/DesignPatternDocs.html-EX-3WVS0.js" as="script"><link rel="prefetch" href="/assets/index.html-yBXFj1Oa.js" as="script"><link rel="prefetch" href="/assets/GitDocs.html-lFET__YO.js" as="script"><link rel="prefetch" href="/assets/index.html-2QCU70Id.js" as="script"><link rel="prefetch" href="/assets/KafkaDocs.html-sMaBI5ms.js" as="script"><link rel="prefetch" href="/assets/index.html-KVj9wz9b.js" as="script"><link rel="prefetch" href="/assets/RabbitMQDocs.html-QaK6leh5.js" as="script"><link rel="prefetch" href="/assets/JWT手册v0.14.1.html-y9w4Mg62.js" as="script"><link rel="prefetch" href="/assets/OpenIDConnectCore1.0.html-APox0OCU.js" as="script"><link rel="prefetch" href="/assets/MavenDocs.html-R5Q-Eh02.js" as="script"><link rel="prefetch" href="/assets/NodejsDocs.html-mhZVLWz3.js" as="script"><link rel="prefetch" href="/assets/index.html-fln8LKT8.js" as="script"><link rel="prefetch" href="/assets/404.html-jJTqAGIM.js" as="script"><link rel="prefetch" href="/assets/index.html-Fd2FHmRF.js" as="script"><link rel="prefetch" href="/assets/index.html-8vn3tlcM.js" as="script"><link rel="prefetch" href="/assets/index.html-Ah1XOK9M.js" as="script"><link rel="prefetch" href="/assets/index.html-5cR7gGh7.js" as="script"><link rel="prefetch" href="/assets/index.html-A4lRc9XT.js" as="script"><link rel="prefetch" href="/assets/index.html-MqicBPSj.js" as="script"><link rel="prefetch" href="/assets/index.html-2NcLmK5I.js" as="script"><link rel="prefetch" href="/assets/index.html-cy9JBsRt.js" as="script"><link rel="prefetch" href="/assets/index.html-oTzfeYrR.js" as="script"><link rel="prefetch" href="/assets/index.html-RTVHwVrb.js" as="script"><link rel="prefetch" href="/assets/index.html-BlLDY0pn.js" as="script"><link rel="prefetch" href="/assets/index.html-nQ0SERnj.js" as="script"><link rel="prefetch" href="/assets/index.html-I1ThOsE8.js" as="script"><link rel="prefetch" href="/assets/index.html-t2V7zunj.js" as="script"><link rel="prefetch" href="/assets/index.html-acz7cla3.js" as="script"><link rel="prefetch" href="/assets/index.html-slcmVdsN.js" as="script"><link rel="prefetch" href="/assets/index.html-UGLkiOs0.js" as="script"><link rel="prefetch" href="/assets/index.html-F5Pr0idy.js" as="script"><link rel="prefetch" href="/assets/index.html-izd83Xio.js" as="script"><link rel="prefetch" href="/assets/index.html-AwBHXUfg.js" as="script"><link rel="prefetch" href="/assets/index.html-xu98IX6Q.js" as="script"><link rel="prefetch" href="/assets/index.html-UfVGH1QG.js" as="script"><link rel="prefetch" href="/assets/index.html-R9mYgoch.js" as="script"><link rel="prefetch" href="/assets/index.html-N4zmQZ8t.js" as="script"><link rel="prefetch" href="/assets/Docker配置本地开发环境.html-D2OKE20E.js" as="script"><link rel="prefetch" href="/assets/Golang中http.ListenAndServe阻塞导致if-else不执行问题分析.html-lFVcuSMi.js" as="script"><link rel="prefetch" href="/assets/Golang读取配置文件处理方式.html-_QwCKb-o.js" as="script"><link rel="prefetch" href="/assets/SpringBoot整合第三方依赖.html-NRLPJofL.js" as="script"><link rel="prefetch" href="/assets/WSL2的使用与BUG.html-jxdFF8AG.js" as="script"><link rel="prefetch" href="/assets/gorm中表名自动加s使用复数问题处理.html-ag3npf_6.js" as="script"><link rel="prefetch" href="/assets/基于角色访问控制(Role-Based Access Control)模型.html-R4zvKN68.js" as="script"><link rel="prefetch" href="/assets/index.html-hbHcfQt3.js" as="script"><link rel="prefetch" href="/assets/index.html-oPm08_N2.js" as="script"><link rel="prefetch" href="/assets/index.html-wh1uZ5To.js" as="script"><link rel="prefetch" href="/assets/index.html-wKlINNkW.js" as="script"><link rel="prefetch" href="/assets/about.html-vsyzMPWk.js" as="script"><link rel="prefetch" href="/assets/index.html--AgRJpsb.js" as="script"><link rel="prefetch" href="/assets/index.html-3LQTLpfE.js" as="script"><link rel="prefetch" href="/assets/MySQLDocs.html-C1M6GDLX.js" as="script"><link rel="prefetch" href="/assets/index.html-Xf644HFN.js" as="script"><link rel="prefetch" href="/assets/index.html-uXqiwUMr.js" as="script"><link rel="prefetch" href="/assets/MySQL面试题.html-AP64We3C.js" as="script"><link rel="prefetch" href="/assets/Golang面试题.html-q0OLZ-Xx.js" as="script"><link rel="prefetch" href="/assets/Go入门指南.html-nenO44kC.js" as="script"><link rel="prefetch" href="/assets/index.html-gYqKurjB.js" as="script"><link rel="prefetch" href="/assets/JavaDocs.html-JGCEIJyq.js" as="script"><link rel="prefetch" href="/assets/index.html-kx5X-1Zl.js" as="script"><link rel="prefetch" href="/assets/SpringBootDocs.html-zU1SS_K1.js" as="script"><link rel="prefetch" href="/assets/SpringCloudDocs.html-7KHSxDt7.js" as="script"><link rel="prefetch" href="/assets/SpringDocs.html-YRuV6eq2.js" as="script"><link rel="prefetch" href="/assets/GithubActionDocs.html-F1M9NOHK.js" as="script"><link rel="prefetch" href="/assets/index.html-5uc6gwMM.js" as="script"><link rel="prefetch" href="/assets/DockerDocs.html-eckCCynP.js" as="script"><link rel="prefetch" href="/assets/KubernetesDocs.html-blnU5KSS.js" as="script"><link rel="prefetch" href="/assets/index.html-RjaeVo8L.js" as="script"><link rel="prefetch" href="/assets/AlgorithmsDocs.html-3zLEDzTY.js" as="script"><link rel="prefetch" href="/assets/DataStructuresDocs.html-CIvVxFVI.js" as="script"><link rel="prefetch" href="/assets/index.html-cJt_Wm1U.js" as="script"><link rel="prefetch" href="/assets/DesignPatternDocs.html-CpJPzRzz.js" as="script"><link rel="prefetch" href="/assets/index.html-h0oD093R.js" as="script"><link rel="prefetch" href="/assets/GitDocs.html-ARN57YqH.js" as="script"><link rel="prefetch" href="/assets/index.html-abKmgv7B.js" as="script"><link rel="prefetch" href="/assets/KafkaDocs.html-7FBVCf2v.js" as="script"><link rel="prefetch" href="/assets/index.html-buLWtTuM.js" as="script"><link rel="prefetch" href="/assets/RabbitMQDocs.html-MceckcAv.js" as="script"><link rel="prefetch" href="/assets/JWT手册v0.14.1.html-dFKX9QrG.js" as="script"><link rel="prefetch" href="/assets/OpenIDConnectCore1.0.html-3ZO_2_Zh.js" as="script"><link rel="prefetch" href="/assets/MavenDocs.html-zzKBSsY7.js" as="script"><link rel="prefetch" href="/assets/NodejsDocs.html-VY1AMvdh.js" as="script"><link rel="prefetch" href="/assets/index.html-_RqZVW9_.js" as="script"><link rel="prefetch" href="/assets/404.html-BM_tWCzT.js" as="script"><link rel="prefetch" href="/assets/index.html-k3pRfZ-x.js" as="script"><link rel="prefetch" href="/assets/index.html-cfb-2SLP.js" as="script"><link rel="prefetch" href="/assets/index.html-JQHGmXzI.js" as="script"><link rel="prefetch" href="/assets/index.html-BYBixNKX.js" as="script"><link rel="prefetch" href="/assets/index.html-qamH8t2I.js" as="script"><link rel="prefetch" href="/assets/index.html-aZDo0NCp.js" as="script"><link rel="prefetch" href="/assets/index.html-aNSdk1LZ.js" as="script"><link rel="prefetch" href="/assets/index.html-YvRLg4IX.js" as="script"><link rel="prefetch" href="/assets/index.html-DppkE8e5.js" as="script"><link rel="prefetch" href="/assets/index.html-uqRNziJR.js" as="script"><link rel="prefetch" href="/assets/index.html-wUE8-N3H.js" as="script"><link rel="prefetch" href="/assets/index.html-Oeu9rwmN.js" as="script"><link rel="prefetch" href="/assets/index.html-I2RMU52Z.js" as="script"><link rel="prefetch" href="/assets/index.html-XULE545S.js" as="script"><link rel="prefetch" href="/assets/index.html-Gi6GmEoW.js" as="script"><link rel="prefetch" href="/assets/index.html-LjPHKIsG.js" as="script"><link rel="prefetch" href="/assets/index.html-Ld2xVv-R.js" as="script"><link rel="prefetch" href="/assets/index.html-Osj4rnqY.js" as="script"><link rel="prefetch" href="/assets/index.html-eb6J15aQ.js" as="script"><link rel="prefetch" href="/assets/index.html-A5F18bEA.js" as="script"><link rel="prefetch" href="/assets/index.html-X5TmosQf.js" as="script"><link rel="prefetch" href="/assets/index.html-3FKE49YT.js" as="script"><link rel="prefetch" href="/assets/index.html-KV5fY77f.js" as="script"><link rel="prefetch" href="/assets/giscus-08zh9c_o.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-i2ohwMnJ.js" as="script"><link rel="prefetch" href="/assets/SearchResult-GWbb5vwA.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container no-sidebar has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a aria-label="主页" class="vp-link nav-link nav-link" href="/"><span class="font-icon icon iconfont icon-home" style=""></span>主页<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="TypeScript"><span class="title"><span class="font-icon icon iconfont icon-typescript" style=""></span>TypeScript</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Docs</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="TypeScript Docs" class="vp-link nav-link nav-link" href="/Language/Go入门指南.html"><span class="font-icon icon iconfont icon-typescript" style=""></span>TypeScript Docs<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Vue</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="Vue Docs" class="vp-link nav-link nav-link" href="/Language/Go入门指南.html"><span class="font-icon icon iconfont icon-vue" style=""></span>Vue Docs<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Java"><span class="title"><span class="font-icon icon iconfont icon-java" style=""></span>Java</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Docs</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="Java Docs" class="vp-link nav-link nav-link" href="/Language/Java/JavaDocs.html"><span class="font-icon icon iconfont icon-java" style=""></span>Java Docs<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Spring Framework</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="Spring Docs" class="vp-link nav-link nav-link" href="/Language/Java/SpringDocs.html"><span class="font-icon icon iconfont icon-spring" style=""></span>Spring Docs<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>SpringBoot</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="SpringBoot Docs" class="vp-link nav-link nav-link" href="/Language/Java/SpringBootDocs.html"><span class="font-icon icon iconfont icon-spring" style=""></span>SpringBoot Docs<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>SpringCloud</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="SpringCloud Docs" class="vp-link nav-link nav-link" href="/Language/Java/SpringCloudDocs.html"><span class="font-icon icon iconfont icon-spring" style=""></span>SpringCloud Docs<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Golang"><span class="title"><span class="font-icon icon iconfont icon-golang" style=""></span>Golang</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Docs</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="Golang Docs" class="vp-link nav-link nav-link" href="/Language/Golang/Go%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97.html"><span class="font-icon icon iconfont icon-golang" style=""></span>Golang Docs<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="数据库"><span class="title"><span class="font-icon icon iconfont icon-database" style=""></span>数据库</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>MySQL</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="MySQL Docs" class="vp-link nav-link nav-link" href="/Database/MySQL/MySQLDocs.html"><span class="font-icon icon iconfont icon-mysql" style=""></span>MySQL Docs<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Redis</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="Redis Docs" class="vp-link nav-link nav-link" href="/Database/Redis/1.html"><span class="font-icon icon iconfont icon-redis" style=""></span>Redis Docs<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Elasticsearsh</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="Elasticsearsh Docs" class="vp-link nav-link nav-link" href="/Database/Elasticsearsh/1.html"><span class="font-icon icon iconfont icon-elastic" style=""></span>Elasticsearsh Docs<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="进阶之路"><span class="title"><span class="font-icon icon iconfont icon-kaifasheji" style=""></span>进阶之路</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>消息队列</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="RabbitMQ Docs" class="vp-link nav-link nav-link" href="/TheWayToProgress/MessageQueue/RabbitMQDocs.html"><span class="font-icon icon iconfont icon-rabbitmq" style=""></span>RabbitMQ Docs<!----></a></li><li class="dropdown-subitem"><a aria-label="Kafka Docs" class="vp-link nav-link nav-link" href="/TheWayToProgress/MessageQueue/KafkaDocs.html"><span class="font-icon icon iconfont icon-Kafka" style=""></span>Kafka Docs<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>容器化技术</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="Docker Docs" class="vp-link nav-link nav-link" href="/TheWayToProgress/Container/DockerDocs.html"><span class="font-icon icon iconfont icon-docker" style=""></span>Docker Docs<!----></a></li><li class="dropdown-subitem"><a aria-label="Kubernetes Docs" class="vp-link nav-link nav-link" href="/TheWayToProgress/Container/KubernetesDocs.html"><span class="font-icon icon iconfont icon-kubernetes" style=""></span>Kubernetes Docs<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>依赖管理</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="Nodejs Docs" class="vp-link nav-link nav-link" href="/TheWayToProgress/Package/NodejsDocs.html"><span class="font-icon icon iconfont icon-nodejs" style=""></span>Nodejs Docs<!----></a></li><li class="dropdown-subitem"><a aria-label="Maven Docs" class="vp-link nav-link nav-link" href="/TheWayToProgress/Package/MavenDocs.html"><span class="font-icon icon iconfont icon-maven" style=""></span>Maven Docs<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>版本控制</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="Git Docs" class="vp-link nav-link nav-link" href="/TheWayToProgress/Git/GitDocs.html"><span class="font-icon icon iconfont icon-git" style=""></span>Git Docs<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>数据结构与算法</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="数据结构" class="vp-link nav-link nav-link" href="/TheWayToProgress/DataStructuresAndAlgorithms/DataStructuresDocs.html"><span class="font-icon icon iconfont icon-jiegou" style=""></span>数据结构<!----></a></li><li class="dropdown-subitem"><a aria-label="算法" class="vp-link nav-link nav-link" href="/TheWayToProgress/DataStructuresAndAlgorithms/AlgorithmsDocs.html"><span class="font-icon icon iconfont icon-jiegou" style=""></span>算法<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>设计模式</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="设计模式" class="vp-link nav-link nav-link" href="/TheWayToProgress/DesignPattern/DesignPatternDocs.html"><span class="font-icon icon iconfont icon-kaifasheji" style=""></span>设计模式<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>CI/CD</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="Github Action" class="vp-link nav-link nav-link" href="/TheWayToProgress/CICD/GithubActionDocs.html"><span class="font-icon icon iconfont icon-guidang" style=""></span>Github Action<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>OIDC</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="OpenID Connect Core 1.0" class="vp-link nav-link nav-link" href="/TheWayToProgress/OIDC/OpenIDConnectCore1.0.html"><span class="font-icon icon iconfont icon-guidang" style=""></span>OpenID Connect Core 1.0<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="面试题"><span class="title"><span class="font-icon icon iconfont icon-mianshitiku" style=""></span>面试题</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>编程语言</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="Golang面试题" class="vp-link nav-link nav-link" href="/InterviewQuestion/Golang/Golang%E9%9D%A2%E8%AF%95%E9%A2%98.html"><span class="font-icon icon iconfont icon-golang" style=""></span>Golang面试题<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>框架</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="Beego面试题" class="vp-link nav-link nav-link" href="/InterviewQuestion/Frame/1.html"><span class="font-icon icon iconfont icon-vue" style=""></span>Beego面试题<!----></a></li><li class="dropdown-subitem"><a aria-label="Iris面试题" class="vp-link nav-link nav-link" href="/InterviewQuestion/Frame/2.html"><span class="font-icon icon iconfont icon-edit" style=""></span>Iris面试题<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>数据库</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-label="MySQL面试题" class="vp-link nav-link nav-link" href="/InterviewQuestion/Database/MySQL%E9%9D%A2%E8%AF%95%E9%A2%98.html"><span class="font-icon icon iconfont icon-mysql" style=""></span>MySQL面试题<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>数据结构与算法</span></h4><ul class="dropdown-subitem-wrapper"></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>计算机基础</span></h4><ul class="dropdown-subitem-wrapper"></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a aria-label="关于" class="vp-link nav-link nav-link" href="/Other/about.html"><span class="font-icon icon iconfont icon-info" style=""></span>关于<!----></a></div></nav><!--[--><button type="button" class="search-pro-button" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">搜索</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->JSON Web Token(JWT)</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/GaoYangBenYang" target="_blank" rel="noopener noreferrer">高洋</a></span><span property="author" content="高洋"></span></span><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-09-27T00:00:00.000Z"></span><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 11 分钟</span><meta property="timeRequired" content="PT11M"></span><span class="page-word-info" aria-label="字数🔠" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>约 3185 字</span><meta property="wordCount" content="3185"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category0 clickable" role="navigation">JSON Web Token</span><!--]--><meta property="articleSection" content="JSON Web Token"></span><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_1-摘要">1. 摘要</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_2-jwt的定义">2. JWT的定义</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_3-jwt的原理和流程">3. JWT的原理和流程</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_3-1-跨域认证的问题">3.1 跨域认证的问题</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_3-2-jwt-的原理">3.2 JWT 的原理</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_3-3-jwt的认证流程图">3.3 JWT的认证流程图</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_3-4-jwt的6个优缺点">3.4 JWT的6个优缺点</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_4-jwt的数据结构">4. JWT的数据结构</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_4-1-jwt消息构成">4.1 JWT消息构成</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_4-2-头部-header">4.2 头部（header)</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_4-3-载荷-payload">4.3 载荷（payload)</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_4-4-签名-signature">4.4 签名（signature)</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#_4-5-jwt的用法">4.5 JWT的用法</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#_5-jwt、jws、jwe的区别">5. JWT、JWS、JWE的区别</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><h2 id="_1-摘要" tabindex="-1"><a class="header-anchor" href="#_1-摘要" aria-hidden="true">#</a> 1. 摘要</h2><p>JSON Web Token（缩写 JWT）是目前最流行的跨域认证解决方案，本文介绍它的原理，用法和详细的数据结构。</p><h2 id="_2-jwt的定义" tabindex="-1"><a class="header-anchor" href="#_2-jwt的定义" aria-hidden="true">#</a> 2. JWT的定义</h2><p>Json web token（JWT）是为了网络应用环境间传递声明而执行的一种基于JSON的开发标准（RFC 7519），该token被设计为紧凑且安全的，特别适用于分布式站点的单点登陆（SSO）场景。JWT的声明一般被用来在身份提供者和服务提供者间传递被认证的用户身份信息，以便于从资源服务器获取资源，也可以增加一些额外的其它业务逻辑所必须的声明信息，该token也可直接被用于认证，也可被加密。</p><p>什么情况下使用JWT比较适合？</p><p>授权：这是最常见的使用场景，解决单点登录问题。因为JWT使用起来轻便，开销小，服务端不用记录用户状态信息（无状态），所以使用比较广泛；</p><p>信息交换：JWT是在各个服务之间安全传输信息的好方法。因为JWT可以签名，例如，使用公钥/私钥对儿 - 可以确定请求方是合法的。此外，由于使用标头和有效负载计算签名，还可以验证内容是否未被篡改。</p><h2 id="_3-jwt的原理和流程" tabindex="-1"><a class="header-anchor" href="#_3-jwt的原理和流程" aria-hidden="true">#</a> 3. JWT的原理和流程</h2><h3 id="_3-1-跨域认证的问题" tabindex="-1"><a class="header-anchor" href="#_3-1-跨域认证的问题" aria-hidden="true">#</a> 3.1 跨域认证的问题</h3><p>互联网服务离不开用户认证。一般流程是下面这样：</p><ol><li>用户向服务器发送用户名和密码。</li><li>服务器验证通过后，在当前对话（session）里面保存相关数据，比如用户角色、登录时间等等。</li><li>服务器向用户返回一个 session_id，写入用户的 Cookie。</li><li>用户随后的每一次请求，都会通过 Cookie，将 session_id 传回服务器。</li><li>服务器收到 session_id，找到前期保存的数据，由此得知用户的身份。</li></ol><p>这种模式的问题在于，扩展性（scaling）不好。单机当然没有问题，如果是服务器集群，或者是跨域的服务导向架构，就要求 session 数据共享，每台服务器都能够读取 session。</p><p>举例来说，A 网站和 B 网站是同一家公司的关联服务。现在要求，用户只要在其中一个网站登录，再访问另一个网站就会自动登录，请问怎么实现？</p><p>一种解决方案是 session 数据持久化，写入数据库或别的持久层。各种服务收到请求后，都向持久层请求数据。这种方案的优点是架构清晰，缺点是工程量比较大。另外，持久层万一挂了，就会单点失败。</p><p>另一种方案是服务器索性不保存 session 数据了，所有数据都保存在客户端，每次请求都发回服务器。JWT 就是这种方案的一个代表。</p><h3 id="_3-2-jwt-的原理" tabindex="-1"><a class="header-anchor" href="#_3-2-jwt-的原理" aria-hidden="true">#</a> 3.2 JWT 的原理</h3><p>JWT 的原理是，服务器认证以后，生成一个 JSON 对象，发回给用户，就像下面这样。</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
<span class="token property">&quot;姓名&quot;</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;角色&quot;</span><span class="token operator">:</span> <span class="token string">&quot;管理员&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;到期时间&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023年9月28日0点0分&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以后，用户与服务端通信的时候，都要发回这个 JSON 对象。服务器完全只靠这个对象认定用户身份。为了防止用户篡改数据，服务器在生成这个对象的时候，会加上签名。</p><p>服务器就不保存任何 session 数据了，也就是说，服务器变成无状态了，从而比较容易实现扩展。</p><p>区别:</p><ol><li>session 存储在服务端占用服务器资源，而 JWT 存储在客户端</li><li>session 存储在 Cookie 中，存在伪造跨站请求伪造攻击的风险</li><li>session 只存在一台服务器上，那么下次请求就必须请求这台服务器，不利于分布式应用</li><li>存储在客户端的 JWT 比存储在服务端的 session 更具有扩展性</li></ol><h3 id="_3-3-jwt的认证流程图" tabindex="-1"><a class="header-anchor" href="#_3-3-jwt的认证流程图" aria-hidden="true">#</a> 3.3 JWT的认证流程图</h3><figure><img src="/assets/blog/JSONWebToken基本概念/jwt01.png" alt="JWT的认证流程图" tabindex="0" loading="lazy"><figcaption>JWT的认证流程图</figcaption></figure><p>流程说明：</p><ol><li>浏览器发起请求登陆，携带用户名和密码；</li><li>服务端验证身份，根据算法，将用户标识符打包生成 token,</li><li>服务器返回JWT信息给浏览器，JWT不包含敏感信息；</li><li>浏览器发起请求获取用户资料，把刚刚拿到的 token一起发送给服务器；</li><li>服务器发现数据中有 token，验明正身；</li><li>服务器返回该用户的用户资料；</li></ol><h3 id="_3-4-jwt的6个优缺点" tabindex="-1"><a class="header-anchor" href="#_3-4-jwt的6个优缺点" aria-hidden="true">#</a> 3.4 JWT的6个优缺点</h3><ol><li>JWT默认不加密，但可以加密。生成原始令牌后，可以使用改令牌再次对其进行加密。</li><li>当JWT未加密方法是，一些私密数据无法通过JWT传输。</li><li>JWT不仅可用于认证，还可用于信息交换。善用JWT有助于减少服务器请求数据库的次数。</li><li>JWT的最大缺点是服务器不保存会话状态，所以在使用期间不可能取消令牌或更改令牌的权限。也就是说，一旦JWT签发，在有效期内将会一直有效。</li><li>JWT本身包含认证信息，因此一旦信息泄露，任何人都可以获得令牌的所有权限。为了减少盗用，JWT的有效期不宜设置太长。对于某些重要操作，用户在使用时应该每次都进行进行身份验证。</li><li>为了减少盗用和窃取，JWT不建议使用HTTP协议来传输代码，而是使用加密的HTTPS协议进行传输。</li></ol><h2 id="_4-jwt的数据结构" tabindex="-1"><a class="header-anchor" href="#_4-jwt的数据结构" aria-hidden="true">#</a> 4. JWT的数据结构</h2><h3 id="_4-1-jwt消息构成" tabindex="-1"><a class="header-anchor" href="#_4-1-jwt消息构成" aria-hidden="true">#</a> 4.1 JWT消息构成</h3><p>一个token分3部分，按顺序:</p><blockquote><p>头部（header)<br> 载荷（payload)<br> 签证（signature)</p></blockquote><p>JWT对象为一个很长的字符串，字符之间通过&quot;.&quot;分隔符分为三个子串。注意JWT对象为一个长字串，各字串之间也没有换行符，一般格式为：xxxxx.yyyyy.zzzzz 。</p><blockquote><p>例如 yJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c</p></blockquote><figure><img src="/assets/blog/JSONWebToken基本概念/jwt02.png" alt="JWT的认证流程图" tabindex="0" loading="lazy"><figcaption>JWT的认证流程图</figcaption></figure><h3 id="_4-2-头部-header" tabindex="-1"><a class="header-anchor" href="#_4-2-头部-header" aria-hidden="true">#</a> 4.2 头部（header)</h3><p>JWT的头部承载两部分信息：</p><ul><li>声明类型，这里是jwt</li><li>声明加密的算法 通常直接使用 HMAC SHA256</li></ul><p>JWT里验证和签名使用的算法，可选择下面的：</p><table><thead><tr><th style="text-align:left;">JWS</th><th style="text-align:left;">算法名称</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;">HS256</td><td style="text-align:left;">HMAC256</td><td style="text-align:left;">HMAC with SHA-256</td></tr><tr><td style="text-align:left;">HS384</td><td style="text-align:left;">HMAC384</td><td style="text-align:left;">HMAC with SHA-384</td></tr><tr><td style="text-align:left;">HS384</td><td style="text-align:left;">HMAC512</td><td style="text-align:left;">HMAC with SHA-512</td></tr><tr><td style="text-align:left;">RS256</td><td style="text-align:left;">RSA256</td><td style="text-align:left;">RSASSA-PKCS1-v1_5 with SHA-256</td></tr><tr><td style="text-align:left;">RS384</td><td style="text-align:left;">RSA384</td><td style="text-align:left;">RSASSA-PKCS1-v1_5 with SHA-384</td></tr><tr><td style="text-align:left;">RS512</td><td style="text-align:left;">RSA512</td><td style="text-align:left;">RSASSA-PKCS1-v1_5 with SHA-512</td></tr><tr><td style="text-align:left;">ES256</td><td style="text-align:left;">ECDSA256</td><td style="text-align:left;">ECDSA with curve P-256 and SHA-256</td></tr><tr><td style="text-align:left;">ES384</td><td style="text-align:left;">ECDSA384</td><td style="text-align:left;">ECDSA with curve P-384 and SHA-384</td></tr><tr><td style="text-align:left;">ES512</td><td style="text-align:left;">ECDSA512</td><td style="text-align:left;">ECDSA with curve P-521 and SHA-512</td></tr></tbody></table><p>JWT的头部描述JWT元数据的JSON对象参考：<br> {<br> &quot;alg&quot;: &quot;HS256&quot;,<br> &quot;typ&quot;: &quot;JWT&quot;<br> }</p><h3 id="_4-3-载荷-payload" tabindex="-1"><a class="header-anchor" href="#_4-3-载荷-payload" aria-hidden="true">#</a> 4.3 载荷（payload)</h3><p>Payload 部分也是一个 JSON 对象，用来存放实际需要传递的数据。JWT 规定了7个官方字段，供选用。</p><blockquote><p>iss (issuer)：签发人</p></blockquote><blockquote><p>exp (expiration time)：过期时间</p></blockquote><blockquote><p>sub (subject)：主题</p></blockquote><blockquote><p>aud (audience)：受众</p></blockquote><blockquote><p>nbf (Not Before)：生效时间</p></blockquote><blockquote><p>iat (Issued At)：签发时间</p></blockquote><blockquote><p>jti (JWT ID)：编号</p></blockquote><p>除以上默认字段外，我们还可以自定义私有字段，如下例：<br> {<br> &quot;sub&quot;: &quot;1234567890&quot;,<br> &quot;name&quot;: &quot;chongchong&quot;,<br> &quot;admin&quot;: true<br> }</p><p>注意，JWT 默认是不加密的，任何人都可以读到，所以不要把秘密信息放在这个部分。<br> 这个 JSON 对象也要使用 Base64URL 算法转成字符串。</p><p>代码样例如下:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code> <span class="token constant">JWT</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withHeader</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span> <span class="token comment">// header</span>
                <span class="token punctuation">.</span><span class="token function">withClaim</span><span class="token punctuation">(</span><span class="token string">&quot;iss&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Service&quot;</span><span class="token punctuation">)</span> <span class="token comment">// payload</span>
                <span class="token punctuation">.</span><span class="token function">withClaim</span><span class="token punctuation">(</span><span class="token string">&quot;aud&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;APP&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withIssuedAt</span><span class="token punctuation">(</span>iatDate<span class="token punctuation">)</span> <span class="token comment">// sign time</span>
                <span class="token punctuation">.</span><span class="token function">withExpiresAt</span><span class="token punctuation">(</span>expiresDate<span class="token punctuation">)</span> <span class="token comment">// expire time</span>
                <span class="token punctuation">.</span><span class="token function">withClaim</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cy&quot;</span><span class="token punctuation">)</span> <span class="token comment">// payload</span>
                <span class="token punctuation">.</span><span class="token function">withClaim</span><span class="token punctuation">(</span><span class="token string">&quot;user_id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;11222&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-4-签名-signature" tabindex="-1"><a class="header-anchor" href="#_4-4-签名-signature" aria-hidden="true">#</a> 4.4 签名（signature)</h3><p>Signature 部分是对前两部分的签名，防止数据篡改。<br> 首先，需要指定一个密钥（secret）。这个密钥只有服务器才知道，不能泄露给用户。然后，使用 Header 里面指定的签名算法（默认是 HMAC SHA256），按照下面的公式产生签名。</p><blockquote><p>HMACSHA256( base64UrlEncode(header) + &quot;.&quot; + base64UrlEncode(payload), secret)</p></blockquote><p>算出签名以后，把 Header、Payload、Signature 三个部分拼成一个字符串，每个部分之间用&quot;点&quot;（.）分隔，就构成整个JWT对象TOKEN， 就可以返回给用户。</p><h4 id="_4-4-1-base64url算法" tabindex="-1"><a class="header-anchor" href="#_4-4-1-base64url算法" aria-hidden="true">#</a> 4.4.1 Base64URL算法</h4><p>前面提到，Header 和 Payload 串型化的算法是 Base64URL。这个算法跟 Base64 算法基本类似，但有一些小的不同。<br> JWT 作为一个令牌（token），有些场合可能会放到 URL（比如 <a href="http://api.example.com/?token=xxx%EF%BC%89%E3%80%82Base64" target="_blank" rel="noopener noreferrer">api.example.com/?token=xxx）。Base64<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 有三个字符+、/和=，在 URL 里面有特殊含义，所以要被替换掉：=被省略、+替换成-，/替换成_ 。这就是 Base64URL 算法。</p><h3 id="_4-5-jwt的用法" tabindex="-1"><a class="header-anchor" href="#_4-5-jwt的用法" aria-hidden="true">#</a> 4.5 JWT的用法</h3><p>客户端接收服务器返回的JWT，将其存储在Cookie或localStorage中。<br> 此后，客户端将在与服务器交互中都会带JWT。如果将它存储在Cookie中，就可以自动发送，但是不会跨域，因此一般是将它放入HTTP请求的Header中的Authorization字段中。</p><blockquote><p>Authorization: Bearer &lt;token&gt;</p></blockquote><p>当跨域时，也可以将JWT被放置于POST请求的数据主体中。</p><h2 id="_5-jwt、jws、jwe的区别" tabindex="-1"><a class="header-anchor" href="#_5-jwt、jws、jwe的区别" aria-hidden="true">#</a> 5. JWT、JWS、JWE的区别</h2><ol><li><p>JWT(JSON Web Tokens)，jwt长度较小，且可以使用URL传输(URL safe)。不想cookies只能在web环境起作用。 JWT可以同时使用在web环境和RESTfull的接口。</p></li><li><p>对于开发者来说，JWT与另外两种相近的标准:JWS(JSON Web Signature)、JWE(JSON Web Encryption)，容易引起混乱。</p></li><li><p>关于JWT的描述，可以参考RFC7519(<a href="https://tools.ietf.org/html/rfc7519" target="_blank" rel="noopener noreferrer">https://tools.ietf.org/html/rfc7519<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)的描述:<br> **JSON Web Token (JWT) **是一个间接地、URL安全的，表现为一组声明，可以在双方之间进行传输。一个JWT的声明，是指经过编码后的一个JSON对象，这个JSON对象可以是一个JSON Web Signature(JWS)结构的荷载(payload)，或者是一个JSON Web Encryption(JWE)结构的明文。允许使用声明进行数字签名，或者通过一个Message Authentication Code(MAC)进行完整性保护可选择是否加密。</p><p>简单来说，JWTs表现为一组被编码为JWS and/or JWE结构的JSON object的声明(Claim).</p><p>换言之，一组JWT声明(就是表现为JSON格式的Claims)被通过JWS结构或者JWE结构(或者同时使用两种)发送，决定于你如何去实现它。所以，当你发送JWT给别人是，它实际上是一个JWT荷载或者JWE荷载。JWS荷载更加常用。</p></li><li><p>关于JWS<br> 顾名思义，JWS模式对这个内容进行了数字化签名。这个内容被用来存放JWT的声明.服务端签名出JWT并且发送到客户端，并在用户成功认证后进行应答。服务器期望客户端在下次请求的时候将JWS作为请求的一部分，发送回服务端。</p><p>如果我们处理的客户端是欺骗者怎么办呢？这就是签名(signature)需要出场的地方了。签名携带了完整的可验证的信息。换句话说，服务器可以确认，接收到的JWT声明里的JWS是没有经过欺骗客户端、中间者进行修改的。<br> 服务端通过验证消息的签名来确保客户端没有修改声明。如果服务端检测到任何修改，可以采取适当的动作(拒绝这次请求或者锁定客户端之类的)。<br> 客户端同样可以验证签名，为了做到这点，客户端也需要服务端的secret(密钥)(如果这个JWT签名是HMAC算法),或者需要服务端对公钥(如果这个WJT是数字化签名)。<br> 特别注意：对于JWS，荷载(声明部分)没有进行加密，所以，不要发送任何敏感信息。</p></li><li><p>关于JWE<br> JWE模式会对内容加密，而不是签名。JWT的声明会被加密。因此JWE带来了保密性。JWE可以被签名并附在JWS里。这样的话就可以同时加密和签名。因此得到了保密性(Confidentiality)、完整性(Integrity)、可认证(Authentication)。</p></li><li><p>那么对于客户端，如何分辨JWS或者JWE呢？<br> JWS的Header与JWE的Header是不同的，可以通过检查“alg”Header参数的值来区分。如果这个值表现为一个数字签名或者MAC的算法，或者是”none“，则它是一个JWS。<br> 如果它表现为一个 Key Encryption, Key Wrapping, Direct Key Agreement, Key Agreement with Key Wrapping, or Direct Encryption algorithm。则它是一个JWE。<br> 还可以通过Header里的“enc”(encryption algorithm)是否存在来判断，如果&quot;enc&quot;这个成员存在的话说明是JWE，否则的话就是JWS.</p></li></ol></div><!--[--><!----><!--]--><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: GaoYangBenYang@outlook.com">GaoYang</span><!--]--><!--]--></div></div></footer><!----><div id="comment" class="giscus-wrapper input-top" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><div class="vp-copyright">Copyright © 2022-至今 高洋</div></footer></div><!--]--><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-aUK2JwJm.js" defer></script>
  </body>
</html>
