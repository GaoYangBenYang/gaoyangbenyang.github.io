<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://gaoyangbenyang.github.io/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html"><meta property="og:site_name" content="GaoYang's blog"><meta property="og:title" content="MySQL语法高级特性"><meta property="og:description" content="SQL 语法高级特性 本文针对关系型数据库的基本语法。限于篇幅，本文侧重说明用法，不会展开讲解特性、原理。 本文语法主要针对 Mysql，但大部分的语法对其他关系型数据库也适用。 img"><meta property="og:type" content="website"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-09-24T13:38:03.000Z"><meta property="article:author" content="GaoYang"><meta property="article:tag" content="基础语法"><meta property="article:published_time" content="2023-07-26T08:07:17.000Z"><meta property="article:modified_time" content="2023-09-24T13:38:03.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"WebPage","name":"MySQL语法高级特性","description":"SQL 语法高级特性 本文针对关系型数据库的基本语法。限于篇幅，本文侧重说明用法，不会展开讲解特性、原理。 本文语法主要针对 Mysql，但大部分的语法对其他关系型数据库也适用。 img"}</script><title>MySQL语法高级特性 | GaoYang's blog</title><meta name="description" content="SQL 语法高级特性 本文针对关系型数据库的基本语法。限于篇幅，本文侧重说明用法，不会展开讲解特性、原理。 本文语法主要针对 Mysql，但大部分的语法对其他关系型数据库也适用。 img">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-92160eaf.css" as="style"><link rel="stylesheet" href="/assets/style-92160eaf.css">
    <link rel="modulepreload" href="/assets/app-670975e0.js"><link rel="modulepreload" href="/assets/framework-e0039b7c.js"><link rel="modulepreload" href="/assets/MySQL语法高级特性.html-aa148bca.js"><link rel="modulepreload" href="/assets/MySQL语法高级特性.html-a67564a6.js"><link rel="prefetch" href="/assets/index.html-ef361253.js" as="script"><link rel="prefetch" href="/assets/Golang中http.ListenAndServe阻塞导致if-else不执行问题分析.html-ba82f708.js" as="script"><link rel="prefetch" href="/assets/Golang读取配置文件处理方式.html-ca88a0af.js" as="script"><link rel="prefetch" href="/assets/JSON Web Token(JWT)基本概念.html-0a1bcc5a.js" as="script"><link rel="prefetch" href="/assets/WSL2的使用与BUG.html-cdb9cb07.js" as="script"><link rel="prefetch" href="/assets/gorm中表名自动加s使用复数问题处理.html-c2050fe1.js" as="script"><link rel="prefetch" href="/assets/基于角色访问控制(Role-Based Access Control)模型.html-e308a5c0.js" as="script"><link rel="prefetch" href="/assets/Docker基础.html-2cec2f95.js" as="script"><link rel="prefetch" href="/assets/index.html-bb7ac142.js" as="script"><link rel="prefetch" href="/assets/index.html-edc7a7da.js" as="script"><link rel="prefetch" href="/assets/index.html-e0a817cc.js" as="script"><link rel="prefetch" href="/assets/index.html-288001d2.js" as="script"><link rel="prefetch" href="/assets/index.html-f642b0e9.js" as="script"><link rel="prefetch" href="/assets/index.html-53cfc009.js" as="script"><link rel="prefetch" href="/assets/index.html-0c094356.js" as="script"><link rel="prefetch" href="/assets/index.html-4e5db0f4.js" as="script"><link rel="prefetch" href="/assets/about.html-428cafb9.js" as="script"><link rel="prefetch" href="/assets/JWT手册v0.14.1.html-a83f6ea2.js" as="script"><link rel="prefetch" href="/assets/OpenID Connect Core 1.0.html-bf6780b1.js" as="script"><link rel="prefetch" href="/assets/index.html-3fc0c8df.js" as="script"><link rel="prefetch" href="/assets/MySQL语法特性.html-3e74f90f.js" as="script"><link rel="prefetch" href="/assets/index.html-cf65b37e.js" as="script"><link rel="prefetch" href="/assets/MySQL面试题.html-d1630bc3.js" as="script"><link rel="prefetch" href="/assets/Golang面试题.html-03bca5e3.js" as="script"><link rel="prefetch" href="/assets/Go入门指南.html-56c4aae2.js" as="script"><link rel="prefetch" href="/assets/index.html-3291562e.js" as="script"><link rel="prefetch" href="/assets/React基础.html-345599f6.js" as="script"><link rel="prefetch" href="/assets/404.html-751988cb.js" as="script"><link rel="prefetch" href="/assets/index.html-e2ec14e1.js" as="script"><link rel="prefetch" href="/assets/index.html-fa11dd34.js" as="script"><link rel="prefetch" href="/assets/index.html-890d456f.js" as="script"><link rel="prefetch" href="/assets/index.html-b6d77c36.js" as="script"><link rel="prefetch" href="/assets/index.html-d2f2ee5a.js" as="script"><link rel="prefetch" href="/assets/index.html-18b0805b.js" as="script"><link rel="prefetch" href="/assets/index.html-cf2e7463.js" as="script"><link rel="prefetch" href="/assets/index.html-953a7c4a.js" as="script"><link rel="prefetch" href="/assets/index.html-c798037f.js" as="script"><link rel="prefetch" href="/assets/index.html-272d4ac2.js" as="script"><link rel="prefetch" href="/assets/index.html-48775e2b.js" as="script"><link rel="prefetch" href="/assets/index.html-32b69274.js" as="script"><link rel="prefetch" href="/assets/index.html-3db3948f.js" as="script"><link rel="prefetch" href="/assets/index.html-fe211673.js" as="script"><link rel="prefetch" href="/assets/index.html-fdd7af0c.js" as="script"><link rel="prefetch" href="/assets/index.html-55a3814c.js" as="script"><link rel="prefetch" href="/assets/index.html-5473fec5.js" as="script"><link rel="prefetch" href="/assets/index.html-c43daa51.js" as="script"><link rel="prefetch" href="/assets/index.html-85b3db3e.js" as="script"><link rel="prefetch" href="/assets/index.html-6ea125c5.js" as="script"><link rel="prefetch" href="/assets/index.html-a126f781.js" as="script"><link rel="prefetch" href="/assets/index.html-53caba63.js" as="script"><link rel="prefetch" href="/assets/index.html-87427ba8.js" as="script"><link rel="prefetch" href="/assets/index.html-866ea174.js" as="script"><link rel="prefetch" href="/assets/index.html-e9bdd70e.js" as="script"><link rel="prefetch" href="/assets/Golang中http.ListenAndServe阻塞导致if-else不执行问题分析.html-52b5db8e.js" as="script"><link rel="prefetch" href="/assets/Golang读取配置文件处理方式.html-38de60a5.js" as="script"><link rel="prefetch" href="/assets/JSON Web Token(JWT)基本概念.html-27d57cf2.js" as="script"><link rel="prefetch" href="/assets/WSL2的使用与BUG.html-a484d267.js" as="script"><link rel="prefetch" href="/assets/gorm中表名自动加s使用复数问题处理.html-42dddf96.js" as="script"><link rel="prefetch" href="/assets/基于角色访问控制(Role-Based Access Control)模型.html-db6840a8.js" as="script"><link rel="prefetch" href="/assets/Docker基础.html-f07ee71b.js" as="script"><link rel="prefetch" href="/assets/index.html-cc99db88.js" as="script"><link rel="prefetch" href="/assets/index.html-57ad3740.js" as="script"><link rel="prefetch" href="/assets/index.html-d217cab1.js" as="script"><link rel="prefetch" href="/assets/index.html-72b0a28b.js" as="script"><link rel="prefetch" href="/assets/index.html-9e8e51bd.js" as="script"><link rel="prefetch" href="/assets/index.html-d1e1f3c7.js" as="script"><link rel="prefetch" href="/assets/index.html-04de8c71.js" as="script"><link rel="prefetch" href="/assets/index.html-a704eb61.js" as="script"><link rel="prefetch" href="/assets/about.html-4d7e1846.js" as="script"><link rel="prefetch" href="/assets/JWT手册v0.14.1.html-fe770bde.js" as="script"><link rel="prefetch" href="/assets/OpenID Connect Core 1.0.html-b89043a1.js" as="script"><link rel="prefetch" href="/assets/index.html-986a1543.js" as="script"><link rel="prefetch" href="/assets/MySQL语法特性.html-0bb64946.js" as="script"><link rel="prefetch" href="/assets/index.html-33c98f86.js" as="script"><link rel="prefetch" href="/assets/MySQL面试题.html-0941da5e.js" as="script"><link rel="prefetch" href="/assets/Golang面试题.html-b76336c7.js" as="script"><link rel="prefetch" href="/assets/Go入门指南.html-e4ed4a20.js" as="script"><link rel="prefetch" href="/assets/index.html-8dd0d42a.js" as="script"><link rel="prefetch" href="/assets/React基础.html-76d84361.js" as="script"><link rel="prefetch" href="/assets/404.html-350ec284.js" as="script"><link rel="prefetch" href="/assets/index.html-3a31b005.js" as="script"><link rel="prefetch" href="/assets/index.html-908dad4f.js" as="script"><link rel="prefetch" href="/assets/index.html-ca65da51.js" as="script"><link rel="prefetch" href="/assets/index.html-f768e0be.js" as="script"><link rel="prefetch" href="/assets/index.html-1c09b9cd.js" as="script"><link rel="prefetch" href="/assets/index.html-ed37a915.js" as="script"><link rel="prefetch" href="/assets/index.html-9e57a241.js" as="script"><link rel="prefetch" href="/assets/index.html-6e7de317.js" as="script"><link rel="prefetch" href="/assets/index.html-e3b31517.js" as="script"><link rel="prefetch" href="/assets/index.html-2bc51f59.js" as="script"><link rel="prefetch" href="/assets/index.html-99deaf1d.js" as="script"><link rel="prefetch" href="/assets/index.html-95a7c118.js" as="script"><link rel="prefetch" href="/assets/index.html-55099a65.js" as="script"><link rel="prefetch" href="/assets/index.html-7ecfde81.js" as="script"><link rel="prefetch" href="/assets/index.html-942b97fc.js" as="script"><link rel="prefetch" href="/assets/index.html-4aaa3f62.js" as="script"><link rel="prefetch" href="/assets/index.html-f6d3605d.js" as="script"><link rel="prefetch" href="/assets/index.html-97b9d5dc.js" as="script"><link rel="prefetch" href="/assets/index.html-03f42631.js" as="script"><link rel="prefetch" href="/assets/index.html-b224f4cf.js" as="script"><link rel="prefetch" href="/assets/index.html-dbcc2527.js" as="script"><link rel="prefetch" href="/assets/index.html-45e3dd0e.js" as="script"><link rel="prefetch" href="/assets/index.html-8169a50b.js" as="script"><link rel="prefetch" href="/assets/index.html-dcf4ec67.js" as="script"><link rel="prefetch" href="/assets/giscus-f311b0ba.js" as="script"><link rel="prefetch" href="/assets/auto-fa8841cf.js" as="script"><link rel="prefetch" href="/assets/index-b03bef79.js" as="script"><link rel="prefetch" href="/assets/flowchart-35969cab.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-7121291d.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-0191f9da.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-a106bb2c.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-ab04f0b1.js" as="script"><link rel="prefetch" href="/assets/search.esm-7e6792e2.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-29d75cec.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-36cd6c3c.js" as="script"><link rel="prefetch" href="/assets/SearchResult-c53081ae.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container no-sidebar has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button type="button" class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a href="/" class="brand"><img class="logo" src="/logo.svg" alt="GaoYang&#39;s blog"><!----><span class="site-name hide-in-pad">GaoYang&#39;s blog</span></a><!--]--><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><!--[--><!--]--><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!--[--><!--[--><button type="button" class="search-pro-button" role="search" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="placeholder">搜索</div><div class="key-hints"><kbd class="key">Ctrl</kbd><kbd class="key">K</kbd></div></button><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="主页"><span class="font-icon icon iconfont icon-home" style=""></span>主页<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="编程语言"><span class="title"><span class="font-icon icon iconfont icon-language" style=""></span>编程语言</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>React</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Language/React/React%E5%9F%BA%E7%A1%80.html" class="nav-link" aria-label="React基础语法"><span class="font-icon icon iconfont icon-react" style=""></span>React基础语法<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Typescript</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Language/Go入门指南.md" class="nav-link" aria-label="Typescript基础"><span class="font-icon icon iconfont icon-golang" style=""></span>Typescript基础<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Deno</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Language/Go入门指南.md" class="nav-link" aria-label="Deno基础"><span class="font-icon icon iconfont icon-golang" style=""></span>Deno基础<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Golang</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Language/Golang/Go%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97.html" class="nav-link" aria-label="Go入门指南"><span class="font-icon icon iconfont icon-golang" style=""></span>Go入门指南<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Rust</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Language/Go入门指南.md" class="nav-link" aria-label="Rust基础"><span class="font-icon icon iconfont icon-golang" style=""></span>Rust基础<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="数据库"><span class="title"><span class="font-icon icon iconfont icon-database" style=""></span>数据库</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>MySQL</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E7%89%B9%E6%80%A7.html" class="nav-link" aria-label="MySQL语法特性"><span class="font-icon icon iconfont icon-mysql" style=""></span>MySQL语法特性<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Redis</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Database/1" class="nav-link" aria-label="Redis基础"><span class="font-icon icon iconfont icon-redis" style=""></span>Redis基础<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Elasticsearsh</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Database/2" class="nav-link" aria-label="Elasticsearsh基础"><span class="font-icon icon iconfont icon-elastic" style=""></span>Elasticsearsh基础<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="消息队列"><span class="title"><span class="font-icon icon iconfont icon-xiaoxiduilie" style=""></span>消息队列</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>RabbitMQ</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/03MessageQueue/1" class="nav-link" aria-label="RabbitMQ基础"><span class="font-icon icon iconfont icon-rabbitmq" style=""></span>RabbitMQ基础<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Kafka</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/03MessageQueue/1" class="nav-link" aria-label="Kafka基础"><span class="font-icon icon iconfont icon-Kafka" style=""></span>Kafka基础<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="云原生"><span class="title"><span class="font-icon icon iconfont icon-yunweiguanli" style=""></span>云原生</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Linux</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/04CloudNative/1" class="nav-link" aria-label="Ubuntu基础"><span class="font-icon icon iconfont icon-ubuntu" style=""></span>Ubuntu基础<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Docker</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/04CloudNative/1" class="nav-link" aria-label="Dcoker基础"><span class="font-icon icon iconfont icon-docker" style=""></span>Dcoker基础<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Kubernetes</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/04CloudNative/1" class="nav-link" aria-label="Kubernetes基础"><span class="font-icon icon iconfont icon-kubernetes" style=""></span>Kubernetes基础<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="数据结构与算法"><span class="title"><span class="font-icon icon iconfont icon-jiegou" style=""></span>数据结构与算法</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>数据结构</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/05DataStructuresAndAlgorithms/Queue.md" class="nav-link" aria-label="队列"><span class="font-icon icon iconfont icon-shujujiegou" style=""></span>队列<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>算法</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/05DataStructuresAndAlgorithms/Queue.md" class="nav-link" aria-label="二分查找"><span class="font-icon icon iconfont icon-suanfa" style=""></span>二分查找<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="设计模式"><span class="title"><span class="font-icon icon iconfont icon-kaifasheji" style=""></span>设计模式</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/06DesignPattern/1" class="nav-link" aria-label="单例模式"><span class="font-icon icon iconfont icon-kaifasheji" style=""></span>单例模式<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="进阶之路"><span class="title"><span class="font-icon icon iconfont icon-kaifasheji" style=""></span>进阶之路</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>CI/CD</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/07TheWayToProgress/1" class="nav-link" aria-label="Golang面试题"><span class="font-icon icon iconfont icon-golang" style=""></span>Golang面试题<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>分布式</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/07TheWayToProgress/1" class="nav-link" aria-label="Golang面试题"><span class="font-icon icon iconfont icon-golang" style=""></span>Golang面试题<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>高并发</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/07TheWayToProgress/1" class="nav-link" aria-label="Golang面试题"><span class="font-icon icon iconfont icon-golang" style=""></span>Golang面试题<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>海量数据</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/07TheWayToProgress/1" class="nav-link" aria-label="Golang面试题"><span class="font-icon icon iconfont icon-golang" style=""></span>Golang面试题<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>系统设计</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/07TheWayToProgress/1" class="nav-link" aria-label="Golang面试题"><span class="font-icon icon iconfont icon-golang" style=""></span>Golang面试题<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>OIDC</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/07TheWayToProgress/1" class="nav-link" aria-label="OpenID Connect Core 1.0"><span class="font-icon icon iconfont icon-golang" style=""></span>OpenID Connect Core 1.0<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="面试题"><span class="title"><span class="font-icon icon iconfont icon-mianshitiku" style=""></span>面试题</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>编程语言</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/InterviewQuestion/Golang/Golang%E9%9D%A2%E8%AF%95%E9%A2%98.html" class="nav-link" aria-label="Golang面试题"><span class="font-icon icon iconfont icon-golang" style=""></span>Golang面试题<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>框架</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/InterviewQuestion/Frame/1" class="nav-link" aria-label="Beego面试题"><span class="font-icon icon iconfont icon-vue" style=""></span>Beego面试题<!----></a></li><li class="dropdown-subitem"><a href="/InterviewQuestion/Frame/2" class="nav-link" aria-label="Iris面试题"><span class="font-icon icon iconfont icon-edit" style=""></span>Iris面试题<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>数据库</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/InterviewQuestion/Database/MySQL%E9%9D%A2%E8%AF%95%E9%A2%98.html" class="nav-link" aria-label="MySQL面试题"><span class="font-icon icon iconfont icon-mysql" style=""></span>MySQL面试题<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>数据结构与算法</span></h4><ul class="dropdown-subitem-wrapper"></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>计算机基础</span></h4><ul class="dropdown-subitem-wrapper"></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/Other/about.html" class="nav-link" aria-label="关于"><span class="font-icon icon iconfont icon-info" style=""></span>关于<!----></a></div></nav><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--]--><!--[--><!----><!--]--><button type="button" class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="font-icon icon iconfont icon-mysql" style=""></span>MySQL语法高级特性</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/GaoYangBenYang" target="_blank" rel="noopener noreferrer">GaoYang</a></span><span property="author" content="GaoYang"></span></span><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-07-26T08:07:17.000Z"></span><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 14 分钟</span><meta property="timeRequired" content="PT14M"></span><span class="page-word-info" aria-label="字数🔠" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>约 4147 字</span><meta property="wordCount" content="4147"></span><!----><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag8" role>基础语法</span><!--]--><meta property="keywords" content="基础语法"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#连接和组合" class="router-link-active router-link-exact-active toc-link level2">连接和组合</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#连接-join" class="router-link-active router-link-exact-active toc-link level3">连接（JOIN）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#组合-union" class="router-link-active router-link-exact-active toc-link level3">组合（UNION）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#join-vs-union" class="router-link-active router-link-exact-active toc-link level3">JOIN vs UNION</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#函数" class="router-link-active router-link-exact-active toc-link level2">函数</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#文本处理" class="router-link-active router-link-exact-active toc-link level3">文本处理</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#日期和时间处理" class="router-link-active router-link-exact-active toc-link level3">日期和时间处理</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#数值处理" class="router-link-active router-link-exact-active toc-link level3">数值处理</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#汇总" class="router-link-active router-link-exact-active toc-link level3">汇总</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#分组" class="router-link-active router-link-exact-active toc-link level2">分组</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#group-by" class="router-link-active router-link-exact-active toc-link level3">GROUP BY</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#having" class="router-link-active router-link-exact-active toc-link level3">HAVING</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#事务" class="router-link-active router-link-exact-active toc-link level2">事务</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#acid" class="router-link-active router-link-exact-active toc-link level3">ACID</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#事务隔离级别" class="router-link-active router-link-exact-active toc-link level3">事务隔离级别</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#权限控制" class="router-link-active router-link-exact-active toc-link level2">权限控制</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#创建账户" class="router-link-active router-link-exact-active toc-link level3">创建账户</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#修改账户名" class="router-link-active router-link-exact-active toc-link level3">修改账户名</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#删除账户" class="router-link-active router-link-exact-active toc-link level3">删除账户</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#查看权限" class="router-link-active router-link-exact-active toc-link level3">查看权限</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#授予权限" class="router-link-active router-link-exact-active toc-link level3">授予权限</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#删除权限" class="router-link-active router-link-exact-active toc-link level3">删除权限</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#更改密码" class="router-link-active router-link-exact-active toc-link level3">更改密码</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#存储过程" class="router-link-active router-link-exact-active toc-link level2">存储过程</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#使用存储过程" class="router-link-active router-link-exact-active toc-link level3">使用存储过程</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#存储过程的利弊" class="router-link-active router-link-exact-active toc-link level3">存储过程的利弊</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#触发器" class="router-link-active router-link-exact-active toc-link level3">触发器</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#游标" class="router-link-active router-link-exact-active toc-link level2">游标</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/Database/MySQL/MySQL%E8%AF%AD%E6%B3%95%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7.html#参考资料" class="router-link-active router-link-exact-active toc-link level2">参考资料</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="sql-语法高级特性" tabindex="-1"><a class="header-anchor" href="#sql-语法高级特性" aria-hidden="true">#</a> SQL 语法高级特性</h1><blockquote><p>本文针对关系型数据库的基本语法。限于篇幅，本文侧重说明用法，不会展开讲解特性、原理。</p><p>本文语法主要针对 Mysql，但大部分的语法对其他关系型数据库也适用。</p></blockquote><figure><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200115160512.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="连接和组合" tabindex="-1"><a class="header-anchor" href="#连接和组合" aria-hidden="true">#</a> 连接和组合</h2><h3 id="连接-join" tabindex="-1"><a class="header-anchor" href="#连接-join" aria-hidden="true">#</a> 连接（JOIN）</h3><blockquote><p>连接用于连接多个表，使用 <code>JOIN</code> 关键字，并且条件语句使用 <code>ON</code> 而不是 <code>WHERE</code>。</p></blockquote><p>如果一个 <code>JOIN</code> 至少有一个公共字段并且它们之间存在关系，则该 <code>JOIN</code> 可以在两个或多个表上工作。</p><p><code>JOIN</code> 保持基表（结构和数据）不变。<strong>连接可以替换子查询，并且比子查询的效率一般会更快</strong>。</p><p><code>JOIN</code> 有两种连接类型：内连接和外连接。</p><div align="center"><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/database/mysql/sql-join.png" alt="sql-join"></div><h4 id="内连接-inner-join" tabindex="-1"><a class="header-anchor" href="#内连接-inner-join" aria-hidden="true">#</a> 内连接（INNER JOIN）</h4><p>内连接又称等值连接，<strong>使用 <code>INNER JOIN</code> 关键字</strong>。在没有条件语句的情况下<strong>返回笛卡尔积</strong>。</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> vend_name<span class="token punctuation">,</span> prod_name<span class="token punctuation">,</span> prod_price
<span class="token keyword">FROM</span> vendors <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> products
<span class="token keyword">ON</span> vendors<span class="token punctuation">.</span>vend_id <span class="token operator">=</span> products<span class="token punctuation">.</span>vend_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="自连接" tabindex="-1"><a class="header-anchor" href="#自连接" aria-hidden="true">#</a> 自连接（<code>=</code>）</h5><p>自连接可以看成内连接的一种，只是<strong>连接的表是自身</strong>而已。<strong>自然连接是把同名列通过 <code>=</code> 连接起来</strong>的，同名列可以有多个。</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> c1<span class="token punctuation">.</span>cust_id<span class="token punctuation">,</span> c1<span class="token punctuation">.</span>cust_name<span class="token punctuation">,</span> c1<span class="token punctuation">.</span>cust_contact
<span class="token keyword">FROM</span> customers c1<span class="token punctuation">,</span> customers c2
<span class="token keyword">WHERE</span> c1<span class="token punctuation">.</span>cust_name <span class="token operator">=</span> c2<span class="token punctuation">.</span>cust_name
<span class="token operator">AND</span> c2<span class="token punctuation">.</span>cust_contact <span class="token operator">=</span> <span class="token string">&#39;Jim Jones&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="自然连接-natural-join" tabindex="-1"><a class="header-anchor" href="#自然连接-natural-join" aria-hidden="true">#</a> 自然连接（NATURAL JOIN）</h5><p>内连接提供连接的列，而自然连接<strong>自动连接所有同名列</strong>。自然连接使用 <code>NATURAL JOIN</code> 关键字。</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> Products
<span class="token keyword">NATURAL</span> <span class="token keyword">JOIN</span> Customers<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="外连接-outer-join" tabindex="-1"><a class="header-anchor" href="#外连接-outer-join" aria-hidden="true">#</a> 外连接（OUTER JOIN）</h4><p>外连接返回一个表中的所有行，并且仅返回来自此表中满足连接条件的那些行，即两个表中的列是相等的。外连接分为左外连接、右外连接、全外连接（Mysql 不支持）。</p><h5 id="左连接-left-join" tabindex="-1"><a class="header-anchor" href="#左连接-left-join" aria-hidden="true">#</a> 左连接（LEFT JOIN）</h5><p>左外连接就是保留左表没有关联的行。</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> customers<span class="token punctuation">.</span>cust_id<span class="token punctuation">,</span> orders<span class="token punctuation">.</span>order_num
<span class="token keyword">FROM</span> customers <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> orders
<span class="token keyword">ON</span> customers<span class="token punctuation">.</span>cust_id <span class="token operator">=</span> orders<span class="token punctuation">.</span>cust_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="右连接-right-join" tabindex="-1"><a class="header-anchor" href="#右连接-right-join" aria-hidden="true">#</a> 右连接（RIGHT JOIN）</h5><p>右外连接就是保留右表没有关联的行。</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> customers<span class="token punctuation">.</span>cust_id<span class="token punctuation">,</span> orders<span class="token punctuation">.</span>order_num
<span class="token keyword">FROM</span> customers <span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> orders
<span class="token keyword">ON</span> customers<span class="token punctuation">.</span>cust_id <span class="token operator">=</span> orders<span class="token punctuation">.</span>cust_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="组合-union" tabindex="-1"><a class="header-anchor" href="#组合-union" aria-hidden="true">#</a> 组合（UNION）</h3><blockquote><p><code>UNION</code> 运算符<strong>将两个或更多查询的结果组合起来，并生成一个结果集</strong>，其中包含来自 <code>UNION</code> 中参与查询的提取行。</p></blockquote><p><code>UNION</code> 基本规则：</p><ul><li>所有查询的列数和列顺序必须相同。</li><li>每个查询中涉及表的列的数据类型必须相同或兼容。</li><li>通常返回的列名取自第一个查询。</li></ul><p>默认会去除相同行，如果需要保留相同行，使用 <code>UNION ALL</code>。</p><p>只能包含一个 <code>ORDER BY</code> 子句，并且必须位于语句的最后。</p><p>应用场景：</p><ul><li>在一个查询中从不同的表返回结构数据。</li><li>对一个表执行多个查询，按一个查询返回数据。</li></ul><p>组合查询示例：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> cust_name<span class="token punctuation">,</span> cust_contact<span class="token punctuation">,</span> cust_email
<span class="token keyword">FROM</span> customers
<span class="token keyword">WHERE</span> cust_state <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">&#39;IL&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;IN&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;MI&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">UNION</span>
<span class="token keyword">SELECT</span> cust_name<span class="token punctuation">,</span> cust_contact<span class="token punctuation">,</span> cust_email
<span class="token keyword">FROM</span> customers
<span class="token keyword">WHERE</span> cust_name <span class="token operator">=</span> <span class="token string">&#39;Fun4All&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="join-vs-union" tabindex="-1"><a class="header-anchor" href="#join-vs-union" aria-hidden="true">#</a> JOIN vs UNION</h3><ul><li><code>JOIN</code> 中连接表的列可能不同，但在 <code>UNION</code> 中，所有查询的列数和列顺序必须相同。</li><li><code>UNION</code> 将查询之后的行放在一起（垂直放置），但 <code>JOIN</code> 将查询之后的列放在一起（水平放置），即它构成一个笛卡尔积。</li></ul><h2 id="函数" tabindex="-1"><a class="header-anchor" href="#函数" aria-hidden="true">#</a> 函数</h2><blockquote><p>🔔 注意：不同数据库的函数往往各不相同，因此不可移植。本节主要以 Mysql 的函数为例。</p></blockquote><h3 id="文本处理" tabindex="-1"><a class="header-anchor" href="#文本处理" aria-hidden="true">#</a> 文本处理</h3><table><thead><tr><th style="text-align:center;">函数</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;"><code>LEFT()</code>、<code>RIGHT()</code></td><td style="text-align:center;">左边或者右边的字符</td></tr><tr><td style="text-align:center;"><code>LOWER()</code>、<code>UPPER()</code></td><td style="text-align:center;">转换为小写或者大写</td></tr><tr><td style="text-align:center;"><code>LTRIM()</code>、<code>RTIM()</code></td><td style="text-align:center;">去除左边或者右边的空格</td></tr><tr><td style="text-align:center;"><code>LENGTH()</code></td><td style="text-align:center;">长度</td></tr><tr><td style="text-align:center;"><code>SOUNDEX()</code></td><td style="text-align:center;">转换为语音值</td></tr></tbody></table><p>其中， <strong>SOUNDEX()</strong> 可以将一个字符串转换为描述其语音表示的字母数字模式。</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> mytable
<span class="token keyword">WHERE</span> SOUNDEX<span class="token punctuation">(</span>col1<span class="token punctuation">)</span> <span class="token operator">=</span> SOUNDEX<span class="token punctuation">(</span><span class="token string">&#39;apple&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="日期和时间处理" tabindex="-1"><a class="header-anchor" href="#日期和时间处理" aria-hidden="true">#</a> 日期和时间处理</h3><ul><li>日期格式：<code>YYYY-MM-DD</code></li><li>时间格式：<code>HH:MM:SS</code></li></ul><table><thead><tr><th style="text-align:center;">函 数</th><th style="text-align:center;">说 明</th></tr></thead><tbody><tr><td style="text-align:center;"><code>AddDate()</code></td><td style="text-align:center;">增加一个日期（天、周等）</td></tr><tr><td style="text-align:center;"><code>AddTime()</code></td><td style="text-align:center;">增加一个时间（时、分等）</td></tr><tr><td style="text-align:center;"><code>CurDate()</code></td><td style="text-align:center;">返回当前日期</td></tr><tr><td style="text-align:center;"><code>CurTime()</code></td><td style="text-align:center;">返回当前时间</td></tr><tr><td style="text-align:center;"><code>Date()</code></td><td style="text-align:center;">返回日期时间的日期部分</td></tr><tr><td style="text-align:center;"><code>DateDiff()</code></td><td style="text-align:center;">计算两个日期之差</td></tr><tr><td style="text-align:center;"><code>Date_Add()</code></td><td style="text-align:center;">高度灵活的日期运算函数</td></tr><tr><td style="text-align:center;"><code>Date_Format()</code></td><td style="text-align:center;">返回一个格式化的日期或时间串</td></tr><tr><td style="text-align:center;"><code>Day()</code></td><td style="text-align:center;">返回一个日期的天数部分</td></tr><tr><td style="text-align:center;"><code>DayOfWeek()</code></td><td style="text-align:center;">对于一个日期，返回对应的星期几</td></tr><tr><td style="text-align:center;"><code>Hour()</code></td><td style="text-align:center;">返回一个时间的小时部分</td></tr><tr><td style="text-align:center;"><code>Minute()</code></td><td style="text-align:center;">返回一个时间的分钟部分</td></tr><tr><td style="text-align:center;"><code>Month()</code></td><td style="text-align:center;">返回一个日期的月份部分</td></tr><tr><td style="text-align:center;"><code>Now()</code></td><td style="text-align:center;">返回当前日期和时间</td></tr><tr><td style="text-align:center;"><code>Second()</code></td><td style="text-align:center;">返回一个时间的秒部分</td></tr><tr><td style="text-align:center;"><code>Time()</code></td><td style="text-align:center;">返回一个日期时间的时间部分</td></tr><tr><td style="text-align:center;"><code>Year()</code></td><td style="text-align:center;">返回一个日期的年份部分</td></tr></tbody></table><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>2018-4-14 20:25:11
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="数值处理" tabindex="-1"><a class="header-anchor" href="#数值处理" aria-hidden="true">#</a> 数值处理</h3><table><thead><tr><th style="text-align:center;">函数</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">SIN()</td><td style="text-align:center;">正弦</td></tr><tr><td style="text-align:center;">COS()</td><td style="text-align:center;">余弦</td></tr><tr><td style="text-align:center;">TAN()</td><td style="text-align:center;">正切</td></tr><tr><td style="text-align:center;">ABS()</td><td style="text-align:center;">绝对值</td></tr><tr><td style="text-align:center;">SQRT()</td><td style="text-align:center;">平方根</td></tr><tr><td style="text-align:center;">MOD()</td><td style="text-align:center;">余数</td></tr><tr><td style="text-align:center;">EXP()</td><td style="text-align:center;">指数</td></tr><tr><td style="text-align:center;">PI()</td><td style="text-align:center;">圆周率</td></tr><tr><td style="text-align:center;">RAND()</td><td style="text-align:center;">随机数</td></tr></tbody></table><h3 id="汇总" tabindex="-1"><a class="header-anchor" href="#汇总" aria-hidden="true">#</a> 汇总</h3><table><thead><tr><th style="text-align:center;">函 数</th><th style="text-align:center;">说 明</th></tr></thead><tbody><tr><td style="text-align:center;"><code>AVG()</code></td><td style="text-align:center;">返回某列的平均值</td></tr><tr><td style="text-align:center;"><code>COUNT()</code></td><td style="text-align:center;">返回某列的行数</td></tr><tr><td style="text-align:center;"><code>MAX()</code></td><td style="text-align:center;">返回某列的最大值</td></tr><tr><td style="text-align:center;"><code>MIN()</code></td><td style="text-align:center;">返回某列的最小值</td></tr><tr><td style="text-align:center;"><code>SUM()</code></td><td style="text-align:center;">返回某列值之和</td></tr></tbody></table><p><code>AVG()</code> 会忽略 NULL 行。</p><p>使用 DISTINCT 可以让汇总函数值汇总不同的值。</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> col1<span class="token punctuation">)</span> <span class="token keyword">AS</span> avg_col
<span class="token keyword">FROM</span> mytable
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="分组" tabindex="-1"><a class="header-anchor" href="#分组" aria-hidden="true">#</a> 分组</h2><h3 id="group-by" tabindex="-1"><a class="header-anchor" href="#group-by" aria-hidden="true">#</a> GROUP BY</h3><blockquote><p><code>GROUP BY</code> 子句将记录分组到汇总行中，<code>GROUP BY</code> 为每个组返回一个记录。</p></blockquote><p><code>GROUP BY</code> 可以按一列或多列进行分组。</p><p><code>GROUP BY</code> 通常还涉及聚合函数：COUNT，MAX，SUM，AVG 等。</p><p><code>GROUP BY</code> 按分组字段进行排序后，<code>ORDER BY</code> 可以以汇总字段来进行排序。</p><p>分组示例：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> cust_name<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>cust_address<span class="token punctuation">)</span> <span class="token keyword">AS</span> addr_num
<span class="token keyword">FROM</span> Customers <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> cust_name<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>分组后排序示例：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> cust_name<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>cust_address<span class="token punctuation">)</span> <span class="token keyword">AS</span> addr_num
<span class="token keyword">FROM</span> Customers <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> cust_name
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> cust_name <span class="token keyword">DESC</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="having" tabindex="-1"><a class="header-anchor" href="#having" aria-hidden="true">#</a> HAVING</h3><blockquote><p><code>HAVING</code> 用于对汇总的 <code>GROUP BY</code> 结果进行过滤。<code>HAVING</code> 要求存在一个 <code>GROUP BY</code> 子句。</p></blockquote><p><code>WHERE</code> 和 <code>HAVING</code> 可以在相同的查询中。</p><p><code>HAVING</code> vs <code>WHERE</code>：</p><ul><li><code>WHERE</code> 和 <code>HAVING</code> 都是用于过滤。</li><li><code>HAVING</code> 适用于汇总的组记录；而 <code>WHERE</code> 适用于单个记录。</li></ul><p>使用 <code>WHERE</code> 和 <code>HAVING</code> 过滤数据示例：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> cust_name<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> num
<span class="token keyword">FROM</span> Customers
<span class="token keyword">WHERE</span> cust_email <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> cust_name
<span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p><strong>（以下为 DDL 语句用法）</strong></p><h2 id="事务" tabindex="-1"><a class="header-anchor" href="#事务" aria-hidden="true">#</a> 事务</h2><p>不能回退 <code>SELECT</code> 语句，回退 <code>SELECT</code> 语句也没意义；也不能回退 <code>CREATE</code> 和 <code>DROP</code> 语句。</p><p><strong>MySQL 默认采用隐式提交策略（<code>autocommit</code>）</strong>，每执行一条语句就把这条语句当成一个事务然后进行提交。当出现 <code>START TRANSACTION</code> 语句时，会关闭隐式提交；当 <code>COMMIT</code> 或 <code>ROLLBACK</code> 语句执行后，事务会自动关闭，重新恢复隐式提交。</p><p>通过 <code>set autocommit=0</code> 可以取消自动提交，直到 <code>set autocommit=1</code> 才会提交；<code>autocommit</code> 标记是针对每个连接而不是针对服务器的。</p><p>事务处理指令：</p><ul><li><code>START TRANSACTION</code> - 指令用于标记事务的起始点。</li><li><code>SAVEPOINT</code> - 指令用于创建保留点。</li><li><code>ROLLBACK TO</code> - 指令用于回滚到指定的保留点；如果没有设置保留点，则回退到 <code>START TRANSACTION</code> 语句处。</li><li><code>COMMIT</code> - 提交事务。</li><li><code>RELEASE SAVEPOINT</code>：删除某个保存点。</li><li><code>SET TRANSACTION</code>：设置事务的隔离级别。</li></ul><p>事务处理示例：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 开始事务</span>
<span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>

<span class="token comment">-- 插入操作 A</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>user<span class="token punctuation">`</span></span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;root1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;root1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;xxxx@163.com&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建保留点 updateA</span>
<span class="token keyword">SAVEPOINT</span> updateA<span class="token punctuation">;</span>

<span class="token comment">-- 插入操作 B</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>user<span class="token punctuation">`</span></span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;root2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;root2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;xxxx@163.com&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 回滚到保留点 updateA</span>
<span class="token keyword">ROLLBACK</span> <span class="token keyword">TO</span> updateA<span class="token punctuation">;</span>

<span class="token comment">-- 提交事务，只有操作 A 生效</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="acid" tabindex="-1"><a class="header-anchor" href="#acid" aria-hidden="true">#</a> ACID</h3><h3 id="事务隔离级别" tabindex="-1"><a class="header-anchor" href="#事务隔离级别" aria-hidden="true">#</a> 事务隔离级别</h3><hr><p><strong>（以下为 DCL 语句用法）</strong></p><h2 id="权限控制" tabindex="-1"><a class="header-anchor" href="#权限控制" aria-hidden="true">#</a> 权限控制</h2><p><code>GRANT</code> 和 <code>REVOKE</code> 可在几个层次上控制访问权限：</p><ul><li>整个服务器，使用 <code>GRANT ALL</code> 和 <code>REVOKE ALL</code>；</li><li>整个数据库，使用 ON database.*；</li><li>特定的表，使用 ON database.table；</li><li>特定的列；</li><li>特定的存储过程。</li></ul><p>新创建的账户没有任何权限。</p><p>账户用 <code>username@host</code> 的形式定义，<code>username@%</code> 使用的是默认主机名。</p><p>MySQL 的账户信息保存在 mysql 这个数据库中。</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">USE</span> mysql<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token keyword">user</span> <span class="token keyword">FROM</span> <span class="token keyword">user</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="创建账户" tabindex="-1"><a class="header-anchor" href="#创建账户" aria-hidden="true">#</a> 创建账户</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> myuser IDENTIFIED <span class="token keyword">BY</span> <span class="token string">&#39;mypassword&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="修改账户名" tabindex="-1"><a class="header-anchor" href="#修改账户名" aria-hidden="true">#</a> 修改账户名</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> <span class="token keyword">user</span> <span class="token keyword">SET</span> <span class="token keyword">user</span><span class="token operator">=</span><span class="token string">&#39;newuser&#39;</span> <span class="token keyword">WHERE</span> <span class="token keyword">user</span><span class="token operator">=</span><span class="token string">&#39;myuser&#39;</span><span class="token punctuation">;</span>
FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="删除账户" tabindex="-1"><a class="header-anchor" href="#删除账户" aria-hidden="true">#</a> 删除账户</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">USER</span> myuser<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="查看权限" tabindex="-1"><a class="header-anchor" href="#查看权限" aria-hidden="true">#</a> 查看权限</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> myuser<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="授予权限" tabindex="-1"><a class="header-anchor" href="#授予权限" aria-hidden="true">#</a> 授予权限</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span> <span class="token keyword">INSERT</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> myuser<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="删除权限" tabindex="-1"><a class="header-anchor" href="#删除权限" aria-hidden="true">#</a> 删除权限</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">REVOKE</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span> <span class="token keyword">INSERT</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> myuser<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="更改密码" tabindex="-1"><a class="header-anchor" href="#更改密码" aria-hidden="true">#</a> 更改密码</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SET</span> PASSWORD <span class="token keyword">FOR</span> myuser <span class="token operator">=</span> <span class="token string">&#39;mypass&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="存储过程" tabindex="-1"><a class="header-anchor" href="#存储过程" aria-hidden="true">#</a> 存储过程</h2><p>存储过程的英文是 Stored Procedure。它可以视为一组 SQL 语句的批处理。一旦存储过程被创建出来，使用它就像使用函数一样简单，我们直接通过调用存储过程名即可。</p><p>定义存储过程的语法格式：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> 存储过程名称 <span class="token punctuation">(</span><span class="token punctuation">[</span>参数列表<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span>
    需要执行的语句
<span class="token keyword">END</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>存储过程定义语句类型：</p><ul><li><code>CREATE PROCEDURE</code> 用于创建存储过程</li><li><code>DROP PROCEDURE</code> 用于删除存储过程</li><li><code>ALTER PROCEDURE</code> 用于修改存储过程</li></ul><h3 id="使用存储过程" tabindex="-1"><a class="header-anchor" href="#使用存储过程" aria-hidden="true">#</a> 使用存储过程</h3><p>创建存储过程的要点：</p><ul><li><code>DELIMITER</code> 用于定义语句的结束符</li><li>存储过程的 3 种参数类型： <ul><li><code>IN</code>：存储过程的入参</li><li><code>OUT</code>：存储过程的出参</li><li><code>INPUT</code>：既是存储过程的入参，也是存储过程的出参</li></ul></li><li>流控制语句： <ul><li><code>BEGIN…END</code>：<code>BEGIN…END</code> 中间包含了多个语句，每个语句都以（<code>;</code>）号为结束符。</li><li><code>DECLARE</code>：<code>DECLARE</code> 用来声明变量，使用的位置在于 <code>BEGIN…END</code> 语句中间，而且需要在其他语句使用之前进行变量的声明。</li><li><code>SET</code>：赋值语句，用于对变量进行赋值。</li><li><code>SELECT…INTO</code>：把从数据表中查询的结果存放到变量中，也就是为变量赋值。每次只能给一个变量赋值，不支持集合的操作。</li><li><code>IF…THEN…ENDIF</code>：条件判断语句，可以在 <code>IF…THEN…ENDIF</code> 中使用 <code>ELSE</code> 和 <code>ELSEIF</code> 来进行条件判断。</li><li><code>CASE</code>：<code>CASE</code> 语句用于多条件的分支判断。</li></ul></li></ul><p>创建存储过程示例：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">PROCEDURE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token identifier"><span class="token punctuation">`</span>proc_adder<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DEFINER</span><span class="token operator">=</span><span class="token identifier"><span class="token punctuation">`</span>root<span class="token punctuation">`</span></span><span class="token variable">@`localhost`</span> <span class="token keyword">PROCEDURE</span> <span class="token identifier"><span class="token punctuation">`</span>proc_adder<span class="token punctuation">`</span></span><span class="token punctuation">(</span><span class="token operator">IN</span> a <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token operator">IN</span> b <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">OUT</span> sum <span class="token keyword">int</span><span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span>
    <span class="token keyword">DECLARE</span> c <span class="token keyword">int</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> a <span class="token operator">is</span> <span class="token boolean">null</span> <span class="token keyword">then</span> <span class="token keyword">set</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> b <span class="token operator">is</span> <span class="token boolean">null</span> <span class="token keyword">then</span> <span class="token keyword">set</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>

    <span class="token keyword">set</span> sum  <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token keyword">END</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用存储过程示例：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">set</span> <span class="token variable">@b</span><span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">call</span> proc_adder<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token variable">@b</span><span class="token punctuation">,</span><span class="token variable">@s</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@s</span> <span class="token keyword">as</span> sum<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="存储过程的利弊" tabindex="-1"><a class="header-anchor" href="#存储过程的利弊" aria-hidden="true">#</a> 存储过程的利弊</h3><p>存储过程的优点：</p><ul><li><strong>执行效率高</strong>：一次编译多次使用。</li><li><strong>安全性强</strong>：在设定存储过程的时候可以设置对用户的使用权限，这样就和视图一样具有较强的安全性。</li><li><strong>可复用</strong>：将代码封装，可以提高代码复用。</li><li><strong>性能好</strong><ul><li>由于是预先编译，因此具有很高的性能。</li><li>一个存储过程替代大量 T_SQL 语句 ，可以降低网络通信量，提高通信速率。</li></ul></li></ul><p>存储过程的缺点：</p><ul><li><strong>可移植性差</strong>：存储过程不能跨数据库移植。由于不同数据库的存储过程语法几乎都不一样，十分难以维护（不通用）。</li><li><strong>调试困难</strong>：只有少数 DBMS 支持存储过程的调试。对于复杂的存储过程来说，开发和维护都不容易。</li><li><strong>版本管理困难</strong>：比如数据表索引发生变化了，可能会导致存储过程失效。我们在开发软件的时候往往需要进行版本管理，但是存储过程本身没有版本控制，版本迭代更新的时候很麻烦。</li><li><strong>不适合高并发的场景</strong>：高并发的场景需要减少数据库的压力，有时数据库会采用分库分表的方式，而且对可扩展性要求很高，在这种情况下，存储过程会变得难以维护，增加数据库的压力，显然就不适用了。</li></ul><blockquote><p><em>综上，存储过程的优缺点都非常突出，是否使用一定要慎重，需要根据具体应用场景来权衡</em>。</p></blockquote><h3 id="触发器" tabindex="-1"><a class="header-anchor" href="#触发器" aria-hidden="true">#</a> 触发器</h3><blockquote><p>触发器可以视为一种特殊的存储过程。</p><p>触发器是一种与表操作有关的数据库对象，当触发器所在表上出现指定事件时，将调用该对象，即表的操作事件触发表上的触发器的执行。</p></blockquote><h4 id="触发器特性" tabindex="-1"><a class="header-anchor" href="#触发器特性" aria-hidden="true">#</a> 触发器特性</h4><p>可以使用触发器来进行审计跟踪，把修改记录到另外一张表中。</p><p>MySQL 不允许在触发器中使用 <code>CALL</code> 语句 ，也就是不能调用存储过程。</p><p><strong><code>BEGIN</code> 和 <code>END</code></strong></p><p>当触发器的触发条件满足时，将会执行 <code>BEGIN</code> 和 <code>END</code> 之间的触发器执行动作。</p><blockquote><p>🔔 注意：在 MySQL 中，分号 <code>;</code> 是语句结束的标识符，遇到分号表示该段语句已经结束，MySQL 可以开始执行了。因此，解释器遇到触发器执行动作中的分号后就开始执行，然后会报错，因为没有找到和 BEGIN 匹配的 END。</p><p>这时就会用到 <code>DELIMITER</code> 命令（<code>DELIMITER</code> 是定界符，分隔符的意思）。它是一条命令，不需要语句结束标识，语法为：<code>DELIMITER new_delemiter</code>。<code>new_delemiter</code> 可以设为 1 个或多个长度的符号，默认的是分号 <code>;</code>，我们可以把它修改为其他符号，如 <code>$</code> - <code>DELIMITER $</code> 。在这之后的语句，以分号结束，解释器不会有什么反应，只有遇到了 <code>$</code>，才认为是语句结束。注意，使用完之后，我们还应该记得把它给修改回来。</p></blockquote><p><strong><code>NEW</code> 和 <code>OLD</code></strong></p><ul><li>MySQL 中定义了 <code>NEW</code> 和 <code>OLD</code> 关键字，用来表示触发器的所在表中，触发了触发器的那一行数据。</li><li>在 <code>INSERT</code> 型触发器中，<code>NEW</code> 用来表示将要（<code>BEFORE</code>）或已经（<code>AFTER</code>）插入的新数据；</li><li>在 <code>UPDATE</code> 型触发器中，<code>OLD</code> 用来表示将要或已经被修改的原数据，<code>NEW</code> 用来表示将要或已经修改为的新数据；</li><li>在 <code>DELETE</code> 型触发器中，<code>OLD</code> 用来表示将要或已经被删除的原数据；</li><li>使用方法： <code>NEW.columnName</code> （columnName 为相应数据表某一列名）</li></ul><h4 id="触发器指令" tabindex="-1"><a class="header-anchor" href="#触发器指令" aria-hidden="true">#</a> 触发器指令</h4><blockquote><p>提示：为了理解触发器的要点，有必要先了解一下创建触发器的指令。</p></blockquote><p><code>CREATE TRIGGER</code> 指令用于创建触发器。</p><p>语法：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> trigger_name
trigger_time
trigger_event
<span class="token keyword">ON</span> table_name
<span class="token keyword">FOR EACH ROW</span>
<span class="token keyword">BEGIN</span>
  trigger_statements
<span class="token keyword">END</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>说明：</p><ul><li>trigger_name：触发器名</li><li>trigger_time: 触发器的触发时机。取值为 <code>BEFORE</code> 或 <code>AFTER</code>。</li><li>trigger_event: 触发器的监听事件。取值为 <code>INSERT</code>、<code>UPDATE</code> 或 <code>DELETE</code>。</li><li>table_name: 触发器的监听目标。指定在哪张表上建立触发器。</li><li>FOR EACH ROW: 行级监视，Mysql 固定写法，其他 DBMS 不同。</li><li>trigger_statements: 触发器执行动作。是一条或多条 SQL 语句的列表，列表内的每条语句都必须用分号 <code>;</code> 来结尾。</li></ul><p>创建触发器示例：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">DELIMITER</span> $
<span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> <span class="token identifier"><span class="token punctuation">`</span>trigger_insert_user<span class="token punctuation">`</span></span>
<span class="token keyword">AFTER</span> <span class="token keyword">INSERT</span> <span class="token keyword">ON</span> <span class="token identifier"><span class="token punctuation">`</span>user<span class="token punctuation">`</span></span>
<span class="token keyword">FOR EACH ROW</span>
<span class="token keyword">BEGIN</span>
    <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>user_history<span class="token punctuation">`</span></span><span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> operate_type<span class="token punctuation">,</span> operate_time<span class="token punctuation">)</span>
    <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>NEW<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token string">&#39;add a user&#39;</span><span class="token punctuation">,</span>  <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">END</span> $
<span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看触发器示例：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SHOW</span> TRIGGERS<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>删除触发器示例：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TRIGGER</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> trigger_insert_user<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="游标" tabindex="-1"><a class="header-anchor" href="#游标" aria-hidden="true">#</a> 游标</h2><blockquote><p>游标（CURSOR）是一个存储在 DBMS 服务器上的数据库查询，它不是一条 <code>SELECT</code> 语句，而是被该语句检索出来的结果集。在存储过程中使用游标可以对一个结果集进行移动遍历。</p></blockquote><p>游标主要用于交互式应用，其中用户需要对数据集中的任意行进行浏览和修改。</p><p>使用游标的步骤：</p><ol><li><strong>定义游标</strong>：通过 <code>DECLARE cursor_name CURSOR FOR &lt;语句&gt;</code> 定义游标。这个过程没有实际检索出数据。</li><li><strong>打开游标</strong>：通过 <code>OPEN cursor_name</code> 打开游标。</li><li><strong>取出数据</strong>：通过 <code>FETCH cursor_name INTO var_name ...</code> 获取数据。</li><li><strong>关闭游标</strong>：通过 <code>CLOSE cursor_name</code> 关闭游标。</li><li><strong>释放游标</strong>：通过 <code>DEALLOCATE PREPARE</code> 释放游标。</li></ol><p>游标使用示例：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">DELIMITER</span> $
<span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> getTotal<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span>
    <span class="token keyword">DECLARE</span> total <span class="token keyword">INT</span><span class="token punctuation">;</span>
    <span class="token comment">-- 创建接收游标数据的变量</span>
    <span class="token keyword">DECLARE</span> sid <span class="token keyword">INT</span><span class="token punctuation">;</span>
    <span class="token keyword">DECLARE</span> sname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">-- 创建总数变量</span>
    <span class="token keyword">DECLARE</span> sage <span class="token keyword">INT</span><span class="token punctuation">;</span>
    <span class="token comment">-- 创建结束标志变量</span>
    <span class="token keyword">DECLARE</span> done <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token comment">-- 创建游标</span>
    <span class="token keyword">DECLARE</span> cur <span class="token keyword">CURSOR</span> <span class="token keyword">FOR</span> <span class="token keyword">SELECT</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age <span class="token keyword">from</span> cursor_table <span class="token keyword">where</span> age<span class="token operator">&gt;</span><span class="token number">30</span><span class="token punctuation">;</span>
    <span class="token comment">-- 指定游标循环结束时的返回值</span>
    <span class="token keyword">DECLARE</span> <span class="token keyword">CONTINUE</span> <span class="token keyword">HANDLER</span> <span class="token keyword">FOR</span> <span class="token operator">NOT</span> FOUND <span class="token keyword">SET</span> done <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">SET</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">OPEN</span> cur<span class="token punctuation">;</span>
    <span class="token keyword">FETCH</span> cur <span class="token keyword">INTO</span> sid<span class="token punctuation">,</span> sname<span class="token punctuation">,</span> sage<span class="token punctuation">;</span>
    <span class="token keyword">WHILE</span><span class="token punctuation">(</span><span class="token operator">NOT</span> done<span class="token punctuation">)</span>
    <span class="token keyword">DO</span>
        <span class="token keyword">SET</span> total <span class="token operator">=</span> total <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">FETCH</span> cur <span class="token keyword">INTO</span> sid<span class="token punctuation">,</span> sname<span class="token punctuation">,</span> sage<span class="token punctuation">;</span>
    <span class="token keyword">END</span> <span class="token keyword">WHILE</span><span class="token punctuation">;</span>

    <span class="token keyword">CLOSE</span> cur<span class="token punctuation">;</span>
    <span class="token keyword">SELECT</span> total<span class="token punctuation">;</span>
<span class="token keyword">END</span> $
<span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span>

<span class="token comment">-- 调用存储过程</span>
<span class="token keyword">call</span> getTotal<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料" aria-hidden="true">#</a> 参考资料</h2><ul><li><a href="https://book.douban.com/subject/35167240/" target="_blank" rel="noopener noreferrer">《SQL 必知必会》<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://draveness.me/mysql-transaction" target="_blank" rel="noopener noreferrer">『浅入深出』MySQL 中事务的实现<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.cnblogs.com/CraryPrimitiveMan/p/4206942.html" target="_blank" rel="noopener noreferrer">MySQL 的学习--触发器<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://zh.wikipedia.org/wiki/SQL" target="_blank" rel="noopener noreferrer">维基百科词条 - SQL<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.sitesbay.com/sql/index" target="_blank" rel="noopener noreferrer">https://www.sitesbay.com/sql/index<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.w3resource.com/sql/subqueries/understanding-sql-subqueries.php" target="_blank" rel="noopener noreferrer">SQL Subqueries<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://stackoverflow.com/questions/6294778/mysql-quick-breakdown-of-the-types-of-joins" target="_blank" rel="noopener noreferrer">Quick breakdown of the types of joins<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.w3resource.com/sql/sql-union.php" target="_blank" rel="noopener noreferrer">SQL UNION<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.w3resource.com/sql/database-security/create-users.php" target="_blank" rel="noopener noreferrer">SQL database security<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.cnblogs.com/chenpi/p/5136483.html" target="_blank" rel="noopener noreferrer">Mysql 中的存储过程<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: GaoYangBenYang@outlook.com">GaoYang</span><!--]--><!--]--></div></div></footer><!----><div class="giscus-wrapper input-top" id="comment" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><!----><div class="copyright">Copyright © 2022-至今 GaoYang</div></footer></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-670975e0.js" defer></script>
  </body>
</html>
